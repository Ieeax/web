function i(n){for(let t=0;t<n.attributes.length;t++)if(n.attributes[t].name.startsWith("_bl_"))return n.attributes[t].name;return null}function n(n,t,i){n!=null&&t in n&&n[t](i)}export function registerCallback(f,e,o,s,h,c,l){if(!e||s!=="enter"&&s!=="leave"||c!=="animation"&&c!=="transition"){console.warn("[Leeax.Web.Components.Presentation.LxTransition] Received invalid values from .NET: Transition couldn't be registered.");return}const a=i(e);a&&(a in t&&t[a].cancel(),l>0?u(a,f,e,o,s,h,l):r(a,f,e,o,s,h,c),h=h+"-"+s,requestAnimationFrame(()=>{n(o,"before"+s[0].toUpperCase()+s.substr(1),e),e.classList.add(h),requestAnimationFrame(()=>{e.classList.add(h+"-active"),requestAnimationFrame(()=>{e.classList.remove(h),s==="leave"&&e.classList.add(h+"-to")})})}))}function r(i,r,u,f,e,o,s){const h=s==="animation"?"animationend":"transitionend";o=o+"-"+e;const c=l=>{l.target===u&&(r.invokeMethodAsync("HandleCallbackAsync",s==="animation"?l.animationName:l.propertyName),e==="leave"?(u.classList.remove(o+"-active",o+"-to"),n(f,"afterLeave",u)):requestAnimationFrame(()=>{u.classList.add(o+"-to"),requestAnimationFrame(()=>{u.classList.remove(o+"-to"),u.classList.remove(o+"-active"),n(f,"afterEnter",u)})}),u.removeEventListener(h,c),delete t[i])};u.addEventListener(h,c);t[i]={cancel:function(){u.classList.remove(o,o+"-active",o+"-to");u.removeEventListener(h,c);n(f,e+"Cancelled",u)}}}function u(i,r,u,f,e,o,s){o=o+"-"+e;const h=()=>{r.invokeMethodAsync("HandleCallbackAsync",null),e==="leave"?(u.classList.remove(o+"-active",o+"-to"),n(f,"afterLeave",u)):requestAnimationFrame(()=>{u.classList.add(o+"-to"),requestAnimationFrame(()=>{u.classList.remove(o+"-to"),u.classList.remove(o+"-active"),n(f,"afterEnter",u)})}),delete t[i]},c=setTimeout(h,s);t[i]={cancel:function(){u.classList.remove(o,o+"-active",o+"-to");clearTimeout(c);n(f,e+"Cancelled",u)}}}const t={};