function i(n){for(let t=0;t<n.attributes.length;t++)if(n.attributes[t].name.startsWith("_bl_"))return n.attributes[t].name;return null}function t(n,t,i){n!=null&&t in n&&n[t](i)}export function registerCallback(f,e,o,s,h,c,l){if(!e||s!=="enter"&&s!=="leave"||c!=="animation"&&c!=="transition"){console.warn("[Leeax.Web.Components.Presentation.LxTransition] Received invalid values from .NET: Transition couldn't be registered.");return}const a=i(e);a&&(a in n&&n[a].cancel(),l>0?u(a,f,e,o,s,h,l):r(a,f,e,o,s,h,c),h=h+"-"+s,requestAnimationFrame(()=>{t(o,"before"+s[0].toUpperCase()+s.substr(1),e),e.classList.add(h,h+"-active"),requestAnimationFrame(()=>{e.classList.remove(h),e.classList.add(h+"-to")})}))}function r(i,r,u,f,e,o,s){const h=s==="animation"?"animationend":"transitionend";o=o+"-"+e;const c=l=>{l.target===u&&(requestAnimationFrame(()=>{u.classList.remove(o+"-active",o+"-to"),t(f,"after"+e[0].toUpperCase()+e.substr(1),u),r.invokeMethodAsync("HandleCallbackAsync",s==="animation"?l.animationName:l.propertyName)}),u.removeEventListener(h,c),delete n[i])};u.addEventListener(h,c);n[i]={cancel:function(){u.classList.remove(o,o+"-active",o+"-to");u.removeEventListener(h,c);t(f,e+"Cancelled",u)}}}function u(i,r,u,f,e,o,s){o=o+"-"+e;const h=()=>{requestAnimationFrame(()=>{u.classList.remove(o+"-active",o+"-to"),t(f,"after"+e[0].toUpperCase()+e.substr(1),u),r.invokeMethodAsync("HandleCallbackAsync",null)}),delete n[i]},c=setTimeout(h,s);n[i]={cancel:function(){u.classList.remove(o,o+"-active",o+"-to");clearTimeout(c);t(f,e+"Cancelled",u)}}}const n={};